<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Enhanced Privacy Risk Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="container">
                <div class="header-left">
                    <h1>AI-Enhanced Privacy Risk Dashboard</h1>
                    <div class="ai-status">
                        <span class="ai-indicator"></span>
                        <span class="ai-status-text">AI Active</span>
                    </div>
                </div>
                <div class="dashboard-filters">
                    <div class="ai-toggle-container">
                        <label class="ai-toggle">
                            <input type="checkbox" id="aiInsightsToggle" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">AI Insights</span>
                        </label>
                    </div>
                    <select id="timeRange" class="form-control">
                        <option value="7">Last 7 days</option>
                        <option value="30" selected>Last 30 days</option>
                        <option value="90">Last 90 days</option>
                    </select>
                    <button id="exportBtn" class="btn btn--secondary btn--sm">Export AI Report</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="container">
                <!-- AI Executive Summary -->
                <section class="ai-executive-summary" id="aiExecutiveSummary">
                    <div class="ai-panel">
                        <div class="ai-panel-header">
                            <h2>🤖 Executive Summary</h2>
                            <div class="ai-confidence">
                                <span class="confidence-indicator">89% Confidence</span>
                            </div>
                        </div>
                        <div class="summary-content">
                            <p class="summary-overview" id="summaryOverview"></p>
                            <div class="summary-sections">
                                <div class="summary-section">
                                    <h4>Key Findings</h4>
                                    <ul id="keyFindings"></ul>
                                </div>
                                <div class="summary-section">
                                    <h4>Priority Actions</h4>
                                    <ul id="priorityActions"></ul>
                                </div>
                                <div class="summary-section">
                                    <h4>Compliance Status</h4>
                                    <div class="compliance-status" id="complianceStatus"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Metrics Cards with AI Insights -->
                <section class="metrics-grid">
                    <div class="metric-card ai-enhanced">
                        <div class="metric-value" id="totalComments">15,420</div>
                        <div class="metric-label">Total Comments Analyzed</div>
                        <div class="ai-insight">
                            <span class="ai-trend improving">↗ Improving trend</span>
                        </div>
                    </div>
                    <div class="metric-card ai-enhanced">
                        <div class="metric-value high-risk" id="highRiskComments">247</div>
                        <div class="metric-label">High Risk Comments</div>
                        <div class="ai-insight">
                            <span class="ai-trend improving">↘ -8.5% this week</span>
                        </div>
                    </div>
                    <div class="metric-card ai-enhanced">
                        <div class="metric-value" id="piiTypesDetected">6</div>
                        <div class="metric-label">Unique PII Types Detected</div>
                        <div class="ai-insight">
                            <span class="ai-trend stable">→ Stable coverage</span>
                        </div>
                    </div>
                    <div class="metric-card ai-enhanced">
                        <div class="metric-value" id="averageRiskScore">2.8</div>
                        <div class="metric-label">Average Risk Score</div>
                        <div class="ai-insight">
                            <span class="ai-trend moderate">⚠ Moderate risk</span>
                        </div>
                    </div>
                </section>

                <!-- AI Panels Row -->
                <section class="ai-panels-row">
                    <!-- Smart Suggestions -->
                    <div class="ai-panel smart-suggestions">
                        <div class="ai-panel-header">
                            <h3>💡 Smart Suggestions</h3>
                            <div class="panel-actions">
                                <button class="btn btn--sm btn--outline" id="refreshSuggestions">Refresh</button>
                            </div>
                        </div>
                        <div class="suggestions-list" id="suggestionsList"></div>
                    </div>

                    <!-- Anomaly Detection -->
                    <div class="ai-panel anomaly-detection">
                        <div class="ai-panel-header">
                            <h3>🚨 Anomaly Alerts</h3>
                            <div class="panel-actions">
                                <button class="btn btn--sm btn--outline" id="dismissAlerts">Dismiss All</button>
                            </div>
                        </div>
                        <div class="anomaly-list" id="anomalyList"></div>
                    </div>
                </section>

                <!-- Intelligent Insights Cards -->
                <section class="intelligent-insights">
                    <h2>🧠 Intelligent Insights</h2>
                    <div class="insights-grid" id="insightsGrid"></div>
                </section>

                <!-- Natural Language Query Interface -->
                <section class="nl-query-section">
                    <div class="ai-panel">
                        <div class="ai-panel-header">
                            <h3>💬 Ask AI Assistant</h3>
                        </div>
                        <div class="query-interface">
                            <div class="query-input-container">
                                <input type="text" id="nlQueryInput" class="form-control query-input" placeholder="Ask me anything about your privacy data...">
                                <button id="querySubmit" class="btn btn--primary">Ask</button>
                            </div>
                            <div class="query-suggestions">
                                <span class="suggestions-label">Try asking:</span>
                                <div class="suggestion-chips" id="querySuggestions"></div>
                            </div>
                            <div class="query-response" id="queryResponse"></div>
                        </div>
                    </div>
                </section>

                <!-- Charts Section with AI Annotations -->
                <section class="charts-section">
                    <div class="charts-grid">
                        <!-- Risk Distribution Chart -->
                        <div class="chart-card ai-enhanced">
                            <div class="chart-header">
                                <h3>Risk Score Distribution</h3>
                                <div class="ai-annotation" id="riskDistributionInsight"></div>
                            </div>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="riskDistributionChart"></canvas>
                            </div>
                        </div>

                        <!-- Risk Trends Chart -->
                        <div class="chart-card ai-enhanced">
                            <div class="chart-header">
                                <h3>Risk Trends (30 Days)</h3>
                                <div class="ai-annotation" id="riskTrendsInsight"></div>
                            </div>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="riskTrendsChart"></canvas>
                            </div>
                        </div>

                        <!-- PII Types Heatmap -->
                        <div class="chart-card full-width ai-enhanced">
                            <div class="chart-header">
                                <h3>PII Detection Heatmap (Last 7 Days)</h3>
                                <div class="ai-annotation" id="heatmapInsight">AI insights will appear here based on detected patterns</div>
                                <div class="pii-filters">
                                    <div class="filter-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="Email"> Email
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="Phone"> Phone
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="SSN"> SSN
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="Credit Card"> Credit Card
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="Address"> Address
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" checked data-pii="Name"> Name
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="heatmap-container" id="piiHeatmap"></div>
                        </div>
                    </div>
                </section>

                <!-- User Analysis Section with AI -->
                <section class="user-analysis-section">
                    <div class="section-header">
                        <h2>👥 User Risk Analysis</h2>
                        <div class="analysis-controls">
                            <div class="risk-filter">
                                <label for="riskFilter">Filter by Risk Level:</label>
                                <select id="riskFilter" class="form-control">
                                    <option value="all">All Levels</option>
                                    <option value="high">High Risk</option>
                                    <option value="medium">Medium Risk</option>
                                    <option value="low">Low Risk</option>
                                </select>
                            </div>
                            <button class="btn btn--secondary btn--sm" id="generateUserReport">Generate AI Report</button>
                        </div>
                    </div>
                    <div class="user-table-container">
                        <table class="user-table" id="userTable">
                            <thead>
                                <tr>
                                    <th data-sort="id">User ID</th>
                                    <th data-sort="comments">Total Comments</th>
                                    <th data-sort="risk">Risk Score</th>
                                    <th data-sort="pii">PII Types Found</th>
                                    <th data-sort="activity">Last Activity</th>
                                    <th>AI Assessment</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- Table rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Recent High-Risk Comments with AI Actions -->
                <section class="recent-comments-section">
                    <h2>📝 Recent High-Risk Comments</h2>
                    <div class="comments-list" id="recentComments">
                        <!-- Comments will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Predictive Analytics -->
                <section class="predictive-analytics">
                    <div class="ai-panel">
                        <div class="ai-panel-header">
                            <h3>🔮 Predictive Analytics</h3>
                            <div class="update-time" id="predictionUpdateTime"></div>
                        </div>
                        <div class="predictions-grid" id="predictionsGrid"></div>
                    </div>
                </section>
            </div>
        </main>

        <!-- AI Processing Status -->
        <div class="ai-processing-status" id="aiProcessingStatus">
            <div class="processing-indicator">
                <span class="processing-spinner"></span>
                <span class="processing-text">AI analyzing...</span>
            </div>
        </div>
    </div>

    <!-- User Details Modal with AI Insights -->
    <div id="userModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalUserTitle">User Details</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="user-details-grid">
                    <div class="user-stat">
                        <span class="stat-label">Total Comments:</span>
                        <span class="stat-value" id="modalTotalComments">-</span>
                    </div>
                    <div class="user-stat">
                        <span class="stat-label">Average Risk Score:</span>
                        <span class="stat-value" id="modalRiskScore">-</span>
                    </div>
                    <div class="user-stat">
                        <span class="stat-label">PII Types:</span>
                        <span class="stat-value" id="modalPiiTypes">-</span>
                    </div>
                    <div class="user-stat">
                        <span class="stat-label">Last Activity:</span>
                        <span class="stat-value" id="modalLastActivity">-</span>
                    </div>
                </div>
                <div class="ai-user-assessment" id="aiUserAssessment">
                    <h4>🤖 AI Assessment</h4>
                    <p id="assessmentText"></p>
                </div>
                <div class="user-risk-timeline">
                    <h4>Risk Pattern Over Time</h4>
                    <div class="chart-container" style="position: relative; height: 200px;">
                        <canvas id="userRiskChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NL Query Response Modal -->
    <div id="queryModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>🤖 AI Assistant Response</h3>
                <button class="modal-close" id="closeQueryModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="query-result" id="queryResult"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>