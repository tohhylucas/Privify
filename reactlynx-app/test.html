<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Test</title>
  </head>
  <body>
    <h1>Testing Dashboard Components</h1>
    <div id="test-results"></div>

    <script src="data-service.js"></script>
    <script>
      // Test if data loads correctly
      document.addEventListener("DOMContentLoaded", async function () {
        const results = document.getElementById("test-results");

        try {
          // Test data service loading
          const data = await dataService.loadData();

          if (data && data.user) {
            results.innerHTML +=
              '<p style="color: green;">✅ Data service loaded successfully</p>';
            results.innerHTML += `<p>User: ${data.user.name}</p>`;
            results.innerHTML += `<p>Comments: ${data.recentHighRiskComments.length}</p>`;
            results.innerHTML += `<p>Risk Score: ${data.user.avgRiskScore}</p>`;
          } else {
            results.innerHTML +=
              '<p style="color: red;">❌ Data service failed to load data</p>';
          }

          // Test Chart.js availability
          const script = document.createElement("script");
          script.src = "https://cdn.jsdelivr.net/npm/chart.js";
          script.onload = function () {
            results.innerHTML +=
              '<p style="color: green;">✅ Chart.js loaded successfully</p>';
            results.innerHTML +=
              '<p><a href="index.html">Go to Full Dashboard</a></p>';
          };
          script.onerror = function () {
            results.innerHTML +=
              '<p style="color: red;">❌ Chart.js failed to load</p>';
          };
          document.head.appendChild(script);
        } catch (error) {
          results.innerHTML += `<p style="color: red;">❌ Error: ${error.message}</p>`;
        }
      });
    </script>
  </body>
</html>
